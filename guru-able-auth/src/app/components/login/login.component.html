<div class="auth-container">
  <div class="card">
    <div class="card-header">
      <h3>Sign in</h3>
      <p class="muted">Welcome back — please sign in to continue</p>
    </div>

    <div class="card-body">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div *ngIf="error" class="alert">{{ error }}</div>

        <div class="form-group">
          <label for="email">Email</label>
          <input id="email" formControlName="email" type="email" class="form-control" placeholder="you@example.com" />
          <div *ngIf="f.email.touched && f.email.invalid" class="field-error">
            <span *ngIf="f.email.errors?.['required']">Email is required.</span>
            <span *ngIf="f.email.errors?.['email']">Enter a valid email address.</span>
          </div>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="password-row">
            <input id="password" formControlName="password" [type]="hidePassword ? 'password' : 'text'" class="form-control" placeholder="Enter your password" />
            <button type="button" class="toggle-password" (click)="hidePassword = !hidePassword" [attr.aria-pressed]="!hidePassword">
              {{ hidePassword ? 'Show' : 'Hide' }}
            </button>
          </div>
          <div *ngIf="f.password.touched && f.password.invalid" class="field-error">
            <span *ngIf="f.password.errors?.['required']">Password is required.</span>
          </div>
        </div>

        <div class="form-row">
          <label class="checkbox">
            <input type="checkbox" formControlName="remember" /> Remember me
          </label>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn" [disabled]="loading">
            <span *ngIf="!loading">Sign in</span>
            <span *ngIf="loading">Signing in…</span>
          </button>
          <a class="forgot" routerLink="/forgot-password">Forgot password?</a>
        </div>
      </form>

      <div class="divider">OR</div>

      <div class="social-block">
        <div class="google-box" (click)="signInWithGoogle()" role="button" tabindex="0">
          <img src="assets/guruable/images/google-icon.png" alt="Google" onerror="this.style.display='none'">
          <div class="social-text">Sign in with Google</div>
        </div>

        <div class="social-buttons">
          <button class="btn btn-outline" (click)="signInWithGoogle()" [disabled]="loading">Sign in with Google (Popup)</button>
          <button class="btn btn-outline" (click)="signInWithFacebook()" [disabled]="loading">Sign in with Facebook</button>
        </div>
      </div>

      <a routerLink="/register" class="small-link">Create an account</a>
    </div>
  </div>
</div>