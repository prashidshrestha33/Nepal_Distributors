{"ast":null,"code":"import _asyncToGenerator from \"C:/git/newprojects/shh3/guru-able-auth/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nexport let SocialLoginService = /*#__PURE__*/(() => {\n  class SocialLoginService {\n    constructor() {\n      this.googleInitialized = false;\n      this.pendingGoogleResolve = null;\n    }\n    initGoogle(onCredential) {\n      if (this.googleInitialized) return;\n      window['onGoogleCredential'] = response => {\n        onCredential(response.credential);\n        if (this.pendingGoogleResolve) {\n          this.pendingGoogleResolve(response.credential);\n          this.pendingGoogleResolve = null;\n        }\n      };\n      const cfg = {\n        client_id: environment.googleClientId,\n        callback: resp => {\n          window['onGoogleCredential'](resp);\n        }\n      };\n      window.google?.accounts?.id?.initialize(cfg);\n      this.googleInitialized = true;\n    }\n    renderGoogleButton(elementId) {\n      if (!window.google?.accounts?.id) return;\n      window.google.accounts.id.renderButton(document.getElementById(elementId), {\n        theme: 'outline',\n        size: 'large'\n      });\n    }\n    signInWithGoogle() {\n      return new Promise((resolve, reject) => {\n        if (!window.google?.accounts?.id) return reject(new Error('Google SDK not loaded'));\n        this.pendingGoogleResolve = resolve;\n        window.google.accounts.id.prompt();\n        setTimeout(() => {\n          if (this.pendingGoogleResolve) {\n            this.pendingGoogleResolve = null;\n            reject(new Error('Google sign in timed out'));\n          }\n        }, 30000);\n      });\n    }\n    initFacebook() {\n      return new Promise(resolve => {\n        if (window.FB) {\n          resolve();\n          return;\n        }\n        window.fbAsyncInit = () => {\n          window.FB.init({\n            appId: environment.facebookAppId,\n            cookie: true,\n            xfbml: false,\n            version: 'v15.0'\n          });\n          resolve();\n        };\n        const s = document.createElement('script');\n        s.src = 'https://connect.facebook.net/en_US/sdk.js';\n        s.async = true;\n        s.defer = true;\n        document.body.appendChild(s);\n      });\n    }\n    signInWithFacebook() {\n      var _this = this;\n      return new Promise(/*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (resolve, reject) {\n          try {\n            yield _this.initFacebook();\n            window.FB.login(resp => {\n              if (resp.status === 'connected' && resp.authResponse) {\n                resolve(resp.authResponse.accessToken);\n              } else {\n                reject(new Error('Facebook login cancelled or failed'));\n              }\n            }, {\n              scope: 'email'\n            });\n          } catch (err) {\n            reject(err);\n          }\n        });\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    static {\n      this.ɵfac = function SocialLoginService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SocialLoginService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: SocialLoginService,\n        factory: SocialLoginService.ɵfac\n      });\n    }\n  }\n  return SocialLoginService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}