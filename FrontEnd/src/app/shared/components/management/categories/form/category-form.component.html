<div class="space-y-6 px-4 md:px-6">
  <h1 class="text-xl md:text-2xl font-bold text-gray-800">
    Add New Category
  </h1>

  <div class="bg-white rounded-lg shadow p-4 md:p-8">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">

      <!-- Category Name -->
      <div>
        <label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">
          Category Name *
        </label>
        <input
          type="text"
          formControlName="name"
          placeholder="Enter category name"
          class="w-full px-3 md:px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">

        <span *ngIf="isFieldInvalid('name')" class="text-red-500 text-xs mt-1">
          Category name is required
        </span>
      </div>

      <!-- Slug -->
      <div>
        <label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">
          Slug *
        </label>
        <input
          type="text"
          formControlName="slug"
          readonly
          class="w-full px-3 md:px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-sm">

        <p class="text-gray-500 text-xs mt-1">
          Auto-generated as: categories/category-name
        </p>
      </div>

      <!-- Parent Category -->
      <div>
        <label class="block text-xs md:text-sm font-semibold text-gray-700 mb-3">
          Parent Category
        </label>

        <ng-select
          [items]="nestedCategories"
          bindLabel="name"
          bindValue="id"
          formControlName="parent_id"
          [clearable]="true"
          [searchable]="true"
          placeholder="Select parent category"
          class="Selectorcustom w-full">

          <ng-template ng-label-tmp let-item="item">
            <span [style.paddingLeft.px]="(item.depth || 0) * 10">
              {{ item.name }}
            </span>
          </ng-template>

          <ng-template ng-option-tmp let-item="item">
            <span [style.paddingLeft.px]="(item.depth || 0) * 20">
              {{ item.name }}
            </span>
          </ng-template>

        </ng-select>
      </div>

      <!-- Error -->
      <div *ngIf="error" class="p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
        {{ error }}
      </div>

      <!-- Buttons -->
      <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
        <button
          type="submit"
          [disabled]="form.invalid || loading"
          class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50">
          {{ loading ? 'Saving...' : 'Save Category' }}
        </button>

        <button
          type="button"
          (click)="goBack()"
          class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg">
          Cancel
        </button>
      </div>

    </form>
  </div>
</div>
