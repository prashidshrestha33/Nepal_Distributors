<div class="flex flex-col justify-center flex-1 w-full max-w-3xl mx-auto p-6">
  <h2 class="mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md">
    Step 1 â€” Add Company
  </h2>

  <div class="bg-white shadow-lg rounded-xl p-8 border border-gray-200">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 gap-3">

        <!-- BASIC INFORMATION -->
        <section class="mb-3">
          <h3 class="text-sm font-semibold mb-2" style="color: var(--color-gray-700);">
            Basic Information
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Company Name <span class="text-error-500">*</span>
              </label>
              <input
                formControlName="name"
                placeholder="Enter company name"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="name?.invalid && name?.touched" class="mt-1 text-sm text-red-600">Company name is required</p>
            </div>

            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Company Person <span class="text-error-500">*</span>
              </label>
              <input
                formControlName="companyPerson"
                placeholder="Company person name"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="companyPerson?.invalid && companyPerson?.touched" class="mt-1 text-sm text-red-600">Contact person is required</p>
            </div>
          </div>
        </section>

        <hr class="border-gray-200">

        <!-- CONTACT NUMBERS -->
        <section class="mb-3">
          <h3 class="text-sm font-semibold mb-2" style="color: var(--color-gray-700);">
            Contact Numbers
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Mobile Phone <span class="text-error-500">*</span>
              </label>
              <input
                type="text"
                formControlName="mobilePhone"
                placeholder="Mobile phone number"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="mobilePhone?.invalid && mobilePhone?.touched" class="mt-1 text-sm text-red-600">Mobile phone is required</p>
            </div>

            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Landline Phone <span class="text-error-500">*</span>
              </label>
              <input
                type="text"
                formControlName="landLinePhone"
                placeholder="Landline phone number"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="landLinePhone?.invalid && landLinePhone?.touched" class="mt-1 text-sm text-red-600">Landline phone is required</p>
            </div>
          </div>
        </section>

        <hr class="border-gray-200">

        <!-- COMPANY DETAILS -->
        <section class="mb-3">
          <h3 class="text-sm font-semibold mb-2" style="color: var(--color-gray-700);">
            Company Details
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Registration Document <span class="text-error-500">*</span>
              </label>

              <!-- Hidden file input (do NOT bind formControlName to file inputs) -->
              <input
                type="file"
                id="registrationDocument"
                class="hidden"
                (change)="onFileChange($event)"
                required
              />
              <p *ngIf="registrationDocument?.invalid && registrationDocument?.touched" class="mt-1 text-sm text-red-600">Registration document is required</p>

              <!-- Custom button with icon -->
              <label
                for="registrationDocument"
                class="inline-flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md cursor-pointer border border-gray-300 hover:bg-gray-200 transition"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v16h16V4H4zm8 12v-8m0 0l-3 3m3-3l3 3"/>
                </svg>
                Choose File
              </label>

              <!-- Show selected file name -->
              <span id="file-name" class="ml-2 text-sm text-gray-500">{{ fileName }}</span>

              <!-- Image preview (if selected file is an image) -->
              <div *ngIf="filePreview" class="mt-3">
                <img [src]="filePreview" alt="Document preview" class="max-h-40 w-auto rounded-md border" />
              </div>
            </div>

            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Company Type <span class="text-error-500">*</span>
              </label>
              <select
                formControlName="companyType"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs bg-white focus:outline-none focus:ring-3 text-gray-800 border-gray-300"
              >
                <option value="" class="text-gray-400">Select company type</option>
                <option value="Importer">Importer</option>
                <option value="Retailer">Retailer</option>
                <option value="Manufacturer">Manufacturer</option>
                <option value="Wholesaler">Wholesaler</option>
              </select>
              <p *ngIf="companyType?.invalid && companyType?.touched" class="mt-1 text-sm text-red-600">Company type is required</p>
            </div>
          </div>
        </section>

        <hr class="border-gray-200">

        <!-- ADDITIONAL INFORMATION -->
        <section class="mb-3">
          <h3 class="text-sm font-semibold mb-2" style="color: var(--color-gray-700);">
            Additional Information
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Status <span class="text-error-500">*</span>
              </label>
              <input
                formControlName="status"
                placeholder="Status"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="status?.invalid && status?.touched" class="mt-1 text-sm text-red-600">Status is required</p>
            </div>

            <div>
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Address <span class="text-error-500">*</span>
              </label>
              <input
                formControlName="address"
                placeholder="Company address"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="address?.invalid && address?.touched" class="mt-1 text-sm text-red-600">Address is required</p>
            </div>

            <div class="sm:col-span-2">
              <label class="block text-xs font-medium mb-1 text-gray-700">
                Google Map Location <span class="text-error-500">*</span>
              </label>
              <input
                formControlName="googleMapLocation"
                placeholder="Google Maps URL / coordinates"
                required
                class="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 bg-transparent text-gray-800 border-gray-300"
              />
              <p *ngIf="googleMapLocation?.invalid && googleMapLocation?.touched" class="mt-1 text-sm text-red-600">Google Map Location is required</p>
            </div>
          </div>
        </section>

        <!-- BUTTON -->
        <div class="pt-2 flex justify-end">
          <button
            type="submit"
            [disabled]="loading || form.invalid"
            class="flex items-center justify-center px-4 py-2 text-sm font-medium text-white transition rounded-lg bg-brand-500 shadow-theme-xs hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <span *ngIf="loading" class="inline-block w-4 h-4 mr-2 border-2 border-gray-300 border-t-white rounded-full animate-spin"></span>
            Next
          </button>
        </div>

        <!-- Validation summary -->
        <div *ngIf="form.invalid && (form.touched || form.dirty)" class="mt-3 text-sm text-red-600">
          Please fill all required fields before proceeding.
        </div>

        <!-- Feedback -->
        <div *ngIf="createdCompanyId" class="text-green-600 text-xs">
          Created company ID: {{ createdCompanyId }}
        </div>
        <div *ngIf="error" class="text-red-600 text-xs">
          {{ error }}
        </div>

      </div>
    </form>
  </div>
</div>
